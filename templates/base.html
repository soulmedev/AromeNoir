<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Arome Noir - Ексклюзивні аромати{% endblock %}</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    {% load static %}
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="bg-animation"></div>

    <header>
        <nav>
            <a href="{% url 'products:home' %}" class="logo">AROME NOIR</a>
            <ul class="nav-links">
                <li><a href="{% url 'products:home' %}">Головна</a></li>
                <li><a href="{% url 'products:collection' %}">Колекція</a></li>
                <li><a href="{% url 'products:about' %}">Про нас</a></li>
            </ul>
            <div class="nav-icons">
                {% if user.is_authenticated %}
                <a href="{% url 'products:favorites' %}" class="icon-btn"><i class="far fa-heart"></i></a>
                {% else %}
                <a href="{% url 'accounts:login' %}" class="icon-btn"><i class="far fa-heart"></i></a>
                {% endif %}
                <a href="{% url 'cart:cart_detail' %}" class="icon-btn">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count" id="cartCount">{{ cart|length }}</span>
                </a>
                {% if user.is_authenticated %}
                    <div class="user-menu">
                        <a href="#" class="icon-btn">
                            <i class="fas fa-user"></i>
                            <span class="user-name" title="{{ user.get_full_name|default:user.email }}">
                                {{ user.first_name|default:user.email|truncatechars:12 }}
                            </span>
                        </a>
                        <div class="user-dropdown">
                            <a href="{% url 'accounts:logout' %}">
                                <i class="fas fa-sign-out-alt"></i> Вийти
                            </a>
                        </div>
                    </div>
                {% else %}
                    <a href="{% url 'accounts:login' %}" class="icon-btn">
                        <i class="fas fa-user"></i>
                    </a>
                {% endif %}
                <button class="mobile-menu-toggle" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>
    </header>

    {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {% block content %}
    {% endblock %}

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>AROME NOIR</h3>
                <p>Оригінальні аромати від найкращих світових брендів. Гарантія автентичності та якості для справжніх цінителів парфумерії.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-pinterest"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Навігація</h3>
                <a href="{% url 'products:about' %}">Про нас</a>
                <a href="{% url 'products:collection' %}">Колекція</a>
                <a href="{% url 'products:home' %}">Новинки</a>
                <a href="{% url 'products:home' %}">Спеціальні пропозиції</a>
            </div>
            <div class="footer-section">
                <h3>Допомога клієнтам</h3>
                <a href="{% url 'support:delivery_payment' %}">Доставка і оплата</a>
                <a href="{% url 'support:returns' %}">Повернення товару</a>
                <a href="{% url 'support:faq' %}">Часті питання</a>
                <a href="{% url 'support:quality_guarantee' %}">Гарантія якості</a>
                <a href="{% url 'support:certificates' %}">Сертифікати</a>
            </div>
            <div class="footer-section">
                <h3>Контакти</h3>
                <p><i class="fas fa-phone"></i> +380 (44) 123-45-67</p>
                <p><i class="fas fa-envelope"></i> contact@aromenoir.com</p>
                <p><i class="fas fa-map-marker-alt"></i> Київ, вул. Хрещатик, 15</p>
                <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">Пн-Нд: 10:00 - 22:00</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Arome Noir. Усі права захищені. Ексклюзивна парфумерія преміум-класу.</p>
        </div>
    </footer>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Товар додано до кошика</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const alerts = document.querySelectorAll('.messages-container .alert');

            alerts.forEach(alert => {
                setTimeout(() => {
                    alert.classList.add('fade-out');
                    setTimeout(() => {
                        alert.remove();
                    }, 500);
                }, 2000);
            });
        });
    </script>

    {% block scripts %}
    <script src="{% static 'js/cart.js' %}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (menuToggle && navLinks) {
                menuToggle.addEventListener('click', () => {
                    menuToggle.classList.toggle('active');
                    navLinks.classList.toggle('active');
                });
                
                navLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', () => {
                        menuToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                    });
                });
                
                document.addEventListener('click', (e) => {
                    if (!navLinks.contains(e.target) && !menuToggle.contains(e.target) && navLinks.classList.contains('active')) {
                        menuToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && navLinks.classList.contains('active')) {
                        menuToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
            }
        });
    </script>
    {% endblock %}
</body>
</html>